import { useEffect, useState, useRef } from "react";
import styles from "./ServicesImmigration.module.css";


const services = [

    {
        icon: 'üìã',
        title: '–Ü–º–º—ñ–≥—Ä–∞—Ü—ñ–π–Ω–∏–π —Å—Ç–∞—Ç—É—Å —ñ –ª–µ–≥–∞–ª—ñ–∑–∞—Ü—ñ—è',
        description: (
            <ul>
                <li>–Ø–∫—ñ —à–ª—è—Ö–∏ –ª–µ–≥–∞–ª—ñ–∑–∞—Ü—ñ—ó –¥–æ—Å—Ç—É–ø–Ω—ñ –≤ –°–®–ê?</li>
                <li>–Ø–∫–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç –º–æ–∂–µ –ø—ñ–¥—ñ–π—Ç–∏ —É –≤–∞—à–æ–º—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –≤–∏–ø–∞–¥–∫—É?</li>
                <li>–Ø–∫—ñ –∫—Ä–æ–∫–∏ –º–æ–∂–Ω–∞ –∑–¥—ñ–π—Å–Ω–∏—Ç–∏ –¥–ª—è —É–∑–∞–∫–æ–Ω–µ–Ω–Ω—è —Å–≤–æ–≥–æ –ø–µ—Ä–µ–±—É–≤–∞–Ω–Ω—è?</li>
            </ul>
        )
    },
    {
        icon: 'üßæ',
        title: '–ê–¥–∞–ø—Ç–∞—Ü—ñ—è –≤ –°–®–ê',
        description: (
            <ul>
                <li>–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ SSN (Social Security Number) —ñ –¥–æ–∑–≤—ñ–ª –Ω–∞ —Ä–æ–±–æ—Ç—É?</li>
                <li>–Ø–∫ –æ—Ñ–æ—Ä–º–∏—Ç–∏ TPS, –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –π–æ–≥–æ –∞–±–æ –ø–æ–¥–∞—Ç–∏ –∑–∞—è–≤–∫—É –≤–ø–µ—Ä—à–µ?</li>
                <li>–Ø–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ñ–æ—Ä–º–∏—Ç–∏ –¥–æ–∑–≤—ñ–ª –Ω–∞ —Ä–æ–±–æ—Ç—É (I-765)?</li>
            </ul>
        )
    },
    {
        icon: 'üöó',
        title: '–ü–æ–∫—É–ø–∫–∞ –∞–≤—Ç–æ–º–æ–±—ñ–ª—è',
        description: (
            <ul>
                <li>–Ø–∫ –∫—É–ø–∏—Ç–∏ –∞–≤—Ç–æ –∑ –∞—É–∫—Ü—ñ–æ–Ω—É –∞–±–æ —É –¥–∏–ª–µ—Ä–∞?</li>
                <li>–Ø–∫ –≤–∑—è—Ç–∏ –∞–≤—Ç–æ –≤ –∫—Ä–µ–¥–∏—Ç –±–µ–∑ –∫—Ä–µ–¥–∏—Ç–Ω–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó —Ç–∞ SSN?</li>
            </ul>
        )
    },
    {
        icon: 'üí≥',
        title: '–ö—Ä–µ–¥–∏—Ç–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è –≤ –°–®–ê',
        description: (
            <ul>
                <li>–Ø–∫ —à–≤–∏–¥–∫–æ –ø–æ–±—É–¥—É–≤–∞—Ç–∏ –∫—Ä–µ–¥–∏—Ç–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –±–µ–∑ –ø–æ–º–∏–ª–æ–∫?</li>
                <li>–Ø–∫—ñ –∫—Ä–µ–¥–∏—Ç–Ω—ñ –∫–∞—Ä—Ç–∫–∏ –≤–∑—è—Ç–∏ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ä–æ—Å—Ç—É –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥—É?</li>
                <li>–Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫—Ä–µ–¥–∏—Ç–Ω—ñ –∫–∞—Ä—Ç–∫–∏ –±–µ–∑ –±–æ—Ä–≥—ñ–≤?</li>
                <li>–Ø–∫ –≤–∑—è—Ç–∏ –∞–≤—Ç–æ –≤ –∫—Ä–µ–¥–∏—Ç –Ω–∞–≤—ñ—Ç—å –±–µ–∑ SSN?</li>
                <li>–Ø–∫ –ø–æ—á–∏—Å—Ç–∏—Ç–∏ –∫—Ä–µ–¥–∏—Ç–Ω—É —ñ—Å—Ç–æ—Ä—ñ—é –∞–±–æ —Å–ø–∏—Å–∞—Ç–∏ —á–∞—Å—Ç–∏–Ω—É –±–æ—Ä–≥—ñ–≤?</li>
                <li>–Ø–∫ —à–≤–∏–¥–∫–æ –∑–±—ñ–ª—å—à–∏—Ç–∏ –∫—Ä–µ–¥–∏—Ç–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥?</li>
            </ul>
        )
    },
    {
        icon: 'üèòÔ∏è',
        title: '–ü–æ–∫—É–ø–∫–∞ –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ',
        description: (
            <ul>
                <li>–Ø–∫ –≤–∑—è—Ç–∏ –±—É–¥–∏–Ω–æ–∫ –∞–±–æ –∫–≤–∞—Ä—Ç–∏—Ä—É –≤ –∫—Ä–µ–¥–∏—Ç?</li>
                <li>–Ø–∫—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –¥–ª—è –∫—É–ø—ñ–≤–ª—ñ –∂–∏—Ç–ª–∞?</li>
                <li>–Ø–∫—ñ —É–º–æ–≤–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –∫—Ä–µ–¥–∏—Ç –Ω–∞ –¥—ñ–º?</li>
            </ul>
        )
    },
    {
        icon: 'üßë‚Äçüíª',
        title: '–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –∑–∞—Ä–æ–±—ñ—Ç–∫—É —ñ —Ä–æ–±–æ—Ç–∏',
        description: (
            <ul>
                <li>–Ø–∫—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ —Ä–æ–±–æ—Ç–∏ –∞–±–æ –ø—ñ–¥—Ä–æ–±—ñ—Ç–∫—É –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏?</li>
                <li>–î–µ –∑–Ω–∞–π—Ç–∏ –≤—ñ–¥–¥–∞–ª–µ–Ω—É —Ä–æ–±–æ—Ç—É –¥–ª—è —ñ–º–º—ñ–≥—Ä–∞–Ω—Ç—ñ–≤?</li>
                <li>–Ø–∫—ñ —Å—Ñ–µ—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—ñ –¥–ª—è –Ω–æ–≤–∏—Ö —ñ–º–º—ñ–≥—Ä–∞–Ω—Ç—ñ–≤ –±–µ–∑ –¥–æ—Å–≤—ñ–¥—É —Ç–∞ –∑–Ω–∞–Ω–Ω—è –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó?</li>
            </ul>
        )
    },
    {
        icon: 'üìà',
        title: '–ë—ñ–∑–Ω–µ—Å —É –°–®–ê',
        description: (
            <ul>
                <li>–Ø–∫ –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Å–≤–æ—é –∫–æ–º–ø–∞–Ω—ñ—é –≤ –°–®–ê?</li>
                <li>–Ø–∫—ñ —ñ—Å–Ω—É—é—Ç—å —Ç–∏–ø–∏ –∫–æ–º–ø–∞–Ω—ñ–π (LLC, S-Corp, C-Corp, Vice Corporation)?</li>
                <li>–Ø–∫ –æ–±—Ä–∞—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–π —Ç–∏–ø –±—ñ–∑–Ω–µ—Å—É –¥–ª—è —Å–≤–æ—î—ó —Å—Ñ–µ—Ä–∏ –¥—ñ—è–ª—å–Ω–æ—Å—Ç—ñ?</li>
                <li>–Ø–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ Nonprofit-–æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—é —Ç–∞ —É–Ω–∏–∫–Ω—É—Ç–∏ –ø–æ–¥–∞—Ç–∫—ñ–≤?</li>
                <li>–Ø–∫—ñ —Å—Ñ–µ—Ä–∏ –ø—ñ–¥—Ö–æ–¥—è—Ç—å –ø—ñ–¥ Nonprofit-–æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó?</li>
            </ul>
        )
    },
    {
        icon: 'üè¶',
        title: '–ë–∞–Ω–∫—ñ–≤—Å—å–∫—ñ —Ä–∞—Ö—É–Ω–∫–∏ —Ç–∞ –∫–∞—Ä—Ç–∫–∏',
        description: (
            <ul>
                <li>–Ø–∫ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –±–∞–Ω–∫—ñ–≤—Å—å–∫—ñ —Ä–∞—Ö—É–Ω–∫–∏ —Ç–∞ –≤–∏–±—Ä–∞—Ç–∏ –Ω–∞–π–∫—Ä–∞—â–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç?</li>
                <li>–Ø–∫ –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ä–∞—Ö—É–Ω–æ–∫ –±–µ–∑ SSN?</li>
                <li>–Ø–∫—ñ –±–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –∫–∞—Ä—Ç–∫–∏ –ø—ñ–¥—Ö–æ–¥—è—Ç—å –¥–ª—è –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥—É?</li>
            </ul>
        )
    },
    {
        icon: 'üè†',
        title: '–û—Ä–µ–Ω–¥–∞ –∂–∏—Ç–ª–∞',
        description: (
            <ul>
                <li>–Ø–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–Ω–∞–π—Ç–∏ —ñ –æ—Ä–µ–Ω–¥—É–≤–∞—Ç–∏ –∂–∏—Ç–ª–æ?</li>
                <li>–Ø–∫ –∑–Ω–∞–π—Ç–∏ co-signer‚Äô–∞ –¥–ª—è –ø—ñ–¥–ø–∏—Å–∞–Ω–Ω—è –¥–æ–≥–æ–≤–æ—Ä—É –æ—Ä–µ–Ω–¥–∏?</li>
                <li>–Ø–∫ –æ—Ä–µ–Ω–¥—É–≤–∞—Ç–∏ –∂–∏—Ç–ª–æ –±–µ–∑ –∫—Ä–µ–¥–∏—Ç–Ω–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó?</li>
                <li>–Ø–∫ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ —Å–≤—ñ–π –¥–æ—Ö—ñ–¥ –¥–ª—è –æ—Ä–µ–Ω–¥–∏?</li>
            </ul>
        )
    },
    {
        icon: '‚úàÔ∏è',
        title: '–ü–æ–¥–æ—Ä–æ–∂—ñ –ø–æ –°–®–ê',
        description: (
            <ul>
                <li>–Ø–∫ –µ–∫–æ–Ω–æ–º–Ω–æ –ø–æ–¥–æ—Ä–æ–∂—É–≤–∞—Ç–∏ –ø–æ –°–®–ê —Ç–∞ —ñ–Ω—à–∏–º –∫—Ä–∞—ó–Ω–∞–º?</li>
                <li>–î–µ –∑–Ω–∞–π—Ç–∏ –∑–Ω–∏–∂–∫–∏ –¥–æ 80% –Ω–∞ –æ—Ä–µ–Ω–¥—É –≥–æ—Ç–µ–ª—ñ–≤?</li>
                <li>–Ø–∫ –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ –¥–µ—à–µ–≤—ñ –∞–≤—ñ–∞–∫–≤–∏—Ç–∫–∏ —Ç–∞ –µ–∫–æ–Ω–æ–º–∏—Ç–∏ –Ω–∞ –ø–µ—Ä–µ–ª—å–æ—Ç–∞—Ö?</li>
                <li>–î–µ —à—É–∫–∞—Ç–∏ –Ω–∞–π–∫—Ä–∞—â—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –Ω–∞ —Ç—É—Ä–∏?</li>
                <li>–Ø–∫—ñ –±–æ–Ω—É—Å–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ —Ç–∞ travel-—Ö–∞–∫–∏ –¥–æ–ø–æ–º–æ–∂—É—Ç—å –∑–µ–∫–æ–Ω–æ–º–∏—Ç–∏?</li>
            </ul>
        )
    }
];


const ServicesImmigration = () => {
    const [heights, setHeights] = useState([]);
    const cardRefs = useRef([]);

    useEffect(() => {
        const updateHeights = () => {
            if (cardRefs.current.length > 0) {
                const newHeights = [];
                const screenWidth = window.innerWidth;
                const itemsPerRow = screenWidth >= 1024 ? 3 : 2;

                for (let i = 0; i < cardRefs.current.length; i += itemsPerRow) {
                    const rowHeights = cardRefs.current
                        .slice(i, i + itemsPerRow)
                        .map(ref => ref?.offsetHeight || 0);
                    const maxHeight = Math.max(...rowHeights);

                    for (let j = 0; j < itemsPerRow; j++) {
                        if (i + j < cardRefs.current.length) {
                            newHeights[i + j] = maxHeight;
                        }
                    }
                }
                setHeights(newHeights);
            }
        };
        updateHeights();
        window.addEventListener("resize", updateHeights);
        return () => window.removeEventListener("resize", updateHeights);
    }, [services.length]);

    return (
        <section className={styles.immigrationServicesSection}>
            <h1 className={styles.title}>–ù–∞—à—ñ –ø–æ—Å–ª—É–≥–∏ —ñ–º–º—ñ–≥—Ä–∞—Ü—ñ—ó</h1>
            {/* <div className={styles.consultationText}>
                <p>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è –∑ —ñ–º–º—ñ–≥—Ä–∞—Ü—ñ—ó, –∞–¥–∞–ø—Ç–∞—Ü—ñ—ó —Ç–∞ —Ñ—ñ–Ω–∞–Ω—Å—ñ–≤ —É –°–®–ê</p>
            </div> */}
            <div className={styles.servicesGrid}>
                {services.map((service, index) => (
                    <div
                        key={index}
                        className={styles.serviceItem}
                        ref={(el) => (cardRefs.current[index] = el)}
                        style={{ height: heights[index] || "auto" }}
                    >
                        <div className={styles.serviceIcon}>{service.icon}</div>
                        <h3 className={styles.serviceTitle}>{service.title}</h3>
                        <p className={styles.serviceDescription}>{service.description}</p>
                    </div>
                ))}
            </div>
            <button className={styles.ctaButton}>–î—ñ–∑–Ω–∞—Ç–∏—Å—å –±—ñ–ª—å—à–µ</button>
        </section>
    );
};

export default ServicesImmigration;
